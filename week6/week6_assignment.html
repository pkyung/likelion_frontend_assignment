<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="stylesheet" href="week6.css">
    <title>??</title>
</head>

<body>
    <div id="container" class="product-container"></div>

    <script>
        $.ajax({
            type: "GET",
            url: "https://api.itbook.store/1.0/new", 
            data: {},
            success: function(response){
                for(i=0; i<21; i++){

                    var container = document.getElementById('container'); //js랑 ajax에서의 변수 이름이 같아도 다른걸로 인식하는건가?

                    book_img = response['books'][i].image;
                    book_title = response['books'][i].title;
                    book_price = response['books'][i].price;
                    book_cite = response['books'][i].url;

                    var newDiv = document.createElement('div'); //새로운 div요소 생성

                    var title_text = document.createElement('p');
                    title_text.id = 'titletxet_id';
                    title_text.textContent = book_title;
                    title_text.addEventListener("click",function() { //텍스트를 클릭했을 때 사이트로 접근하려면 JavaScript를 사용하여 이벤트 리스너를 등록해야 함
                        window.location.href = book_cite;
                    });

                    var price_text = document.createElement('p');
                    price_text.id = 'pricetxet_id';
                    price_text.textContent = book_price;
                    price_text.addEventListener('click',function(){
                        window.location.href = book_cite;
                    });

                    var img_src = document.createElement('img');
                    img_src.src = book_img;               
                    img_src.addEventListener('click',function(){
                        window.location.href = book_cite;
                    });
                
                    container.appendChild(newDiv);
                    newDiv.appendChild(img_src);
                    newDiv.appendChild(title_text);
                    newDiv.appendChild(price_text);


                
            }
            }});
    
        </script>
    
</body>
</html>